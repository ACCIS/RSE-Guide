
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Write code for readability, maintainability, and clarity &#8212; BCI Research Software Engineering Guide</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <link rel="shortcut icon" href="../_static/BCI-RSE.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Write small functions that do one thing, and do that one thing well" href="single-responsibility.html" />
    <link rel="prev" title="RSE Best Practices" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/BCI-RSE.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">BCI Research Software Engineering Guide</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   RSE Best Practices
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Write code for readability, maintainability, and clarity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="single-responsibility.html">
     Write small functions that do
     <em>
      one thing
     </em>
     , and do that
     <em>
      one thing
     </em>
     well
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="testing.html">
     Don’t assume your code does what you think - test it.
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="IDEs-and-tools.html">
     IDEs and automatic tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="version-control.html">
     Version Control
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="languages.html">
     Language Specific Styles
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../abaqus-user-subroutines/index.html">
   Abaqus User Subroutines
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../abaqus-user-subroutines/fortran-style-guidelines.html">
     Fortran Guidelines
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../abaqus-user-subroutines/using-fortran-modules.html">
     Using Fortran Modules
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../abaqus-user-subroutines/free-form-fortran-abaqus.html">
     Free-form Fortran with Abaqus
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../abaqus-user-subroutines/explicit-typing-abaqus.html">
     Explicit Typing with Abaqus
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../guides/index.html">
   RSE Guides
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../guides/getting-started-with-git.html">
     Getting started with Git
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/best-practices/code-for-readability.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#whitespace-and-parentheses">
   Whitespace and parentheses
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#indentation">
     Indentation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#comments">
   Comments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#docstrings">
   Docstrings
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#miscellaneous">
   Miscellaneous
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Write code for readability, maintainability, and clarity</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#whitespace-and-parentheses">
   Whitespace and parentheses
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#indentation">
     Indentation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#comments">
   Comments
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#docstrings">
   Docstrings
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#miscellaneous">
   Miscellaneous
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="write-code-for-readability-maintainability-and-clarity">
<h1>Write code for readability, maintainability, and clarity<a class="headerlink" href="#write-code-for-readability-maintainability-and-clarity" title="Permalink to this headline">#</a></h1>
<p>It is generally accepted that reading code is harder than writing code (even
when reading our own code). This is because when we write code we have some
amount of contextual information in our brain’s ‘working’ memory; When we read
code, particularly code that isn’t ours, this context isn’t available, making
it harder to connect the dots.
This is why we write comments to help explain the context, or the <em>why</em>.</p>
<p>When writing code, it is helpful to bear readability in mind, so that we can
make small tweaks now, e.g. variable names, comments, code layout etc, that
will help save time in the future.</p>
<section id="whitespace-and-parentheses">
<h2>Whitespace and parentheses<a class="headerlink" href="#whitespace-and-parentheses" title="Permalink to this headline">#</a></h2>
<p>Whitespace can be a really helpful tool to improve readability as it helps to
demonstrate <em>intent</em>.</p>
<p>Consider the following expression, taken from the one dimensional
<a class="reference external" href="https://github.com/ACCIS/DefGen_1D">DefGen model</a>, without whitespace:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">xsi_l</span><span class="o">**</span><span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span><span class="o">*</span><span class="n">k</span><span class="o">*</span><span class="p">((</span><span class="n">k</span><span class="o">/</span><span class="p">(</span><span class="n">xsi_f</span><span class="o">**</span><span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span><span class="o">-</span><span class="n">k</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Not only is this hard to read, but is prone to errors, for example,
parentheses in the wrong place or incorrect
<a class="reference external" href="https://en.wikipedia.org/wiki/Order_of_operations">order of operations</a>.
If <code class="docutils literal notranslate"><span class="pre">value</span></code> is wrong, it will be hard to diagnose the problem.</p>
<p>At the very least, adding whitespace to the expression can help.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">xsi_l</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="p">((</span><span class="n">k</span> <span class="o">/</span> <span class="p">(</span><span class="n">xsi_f</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span> <span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>This can be taken one step further by using line continuation to spread the
expression over several lines, as it is
<a class="reference external" href="https://github.com/ACCIS/DefGen_1D/blob/main/src/defgen/defgen.py#L301">in practice</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">2</span><span class="o">*</span><span class="n">xsi_l</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> 
         <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">*</span> 
         <span class="n">k</span> <span class="o">*</span> <span class="p">(</span> 
         <span class="p">(</span><span class="n">k</span> <span class="o">/</span> <span class="p">(</span><span class="n">xsi_f</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span> <span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span>
        <span class="p">))</span>
</pre></div>
</div>
<p>It is now more clear what was <em>intended</em>, and so errors can be fixed more easily.
Consider if we had forgotten to add the parentheses around the 4th term, such
that rather than <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">(b</span> <span class="pre">+</span> <span class="pre">3)</span></code> we had <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">b</span> <span class="pre">+</span> <span class="pre">3</span></code>
(which evaluates as <code class="docutils literal notranslate"><span class="pre">(a</span> <span class="pre">*</span> <span class="pre">b)</span> <span class="pre">+</span> <span class="pre">3</span></code>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">2</span><span class="o">*</span><span class="n">xsi_l</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> 
         <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">*</span> 
         <span class="n">k</span> <span class="o">*</span> 
         <span class="p">(</span><span class="n">k</span> <span class="o">/</span> <span class="p">(</span><span class="n">xsi_f</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span> <span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>Is much easier to diagnose than:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">xsi_l</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="p">(</span><span class="n">k</span> <span class="o">/</span> <span class="p">(</span><span class="n">xsi_f</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span> <span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Another option for improving readability, is to introduce intermediate
variables like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tmp</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">/</span> <span class="p">(</span><span class="n">xsi_f</span><span class="o">**</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span> <span class="p">)</span><span class="o">**</span><span class="mi">2</span>  
<span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">xsi_l</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span><span class="o">/</span><span class="n">h0</span><span class="p">)</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span>    
</pre></div>
</div>
<p>Most of the time, this is perfectly OK, however, it is important to be careful
with variable naming here as <code class="docutils literal notranslate"><span class="pre">tmp</span></code> may already be used (and still needed)
elsewhere in the code (<a class="reference internal" href="single-responsibility.html"><span class="doc std std-doc">Writing small functions</span></a> can help with this,
though).
Additionally, this may add distract the reader (“Why are we holding on to this
value? Is it important?”) and can even sometimes affect the performance of code.</p>
<div class="admonition-best-practice admonition">
<p class="admonition-title">Best Practice</p>
<p>Use whitespace to make code easier to read</p>
</div>
<section id="indentation">
<h3>Indentation<a class="headerlink" href="#indentation" title="Permalink to this headline">#</a></h3>
<p>Indentation is another form of whitespace that can be used to help readability.
Some languages, like Python, enforce correct use of indentation and will not
run if incorrect.
Consider the difference between:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">){</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">another_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"></span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">){</span><span class="w"></span>
<span class="n">my_function</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">another_var</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">){</span><span class="w"></span>
<span class="n">print</span><span class="p">(</span><span class="s">&quot;Fourth iteration&quot;</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">another_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">){</span><span class="w"></span>
<span class="w">        </span><span class="n">my_function</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">another_var</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">){</span><span class="w"></span>
<span class="w">            </span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Third iteration&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition-best-practice admonition">
<p class="admonition-title">Best Practice</p>
<p>Use indentation to visually show nesting</p>
</div>
</section>
</section>
<section id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">#</a></h2>
<p>As mentioned above, comments should describe “why” the code is the way it is,
not simply describe “what” the code does.</p>
<p>Ideally, code should be self-documenting where possible, i.e. the “what” should
be obvious from the code structure and variable names itself.
Often, code which doesn’t make sense without a comment is a sign that the code
needs refactoring.
Of course this is not always possible and these inherently complex/confusing
sections of code should be commented with the ‘what’ to make the job of reading
easier.</p>
<div class="admonition-best-practice admonition">
<p class="admonition-title">Best Practice</p>
<p>Try to write code that is ‘self-documenting’</p>
</div>
<p>Comments that describe the “what” often simply duplicate our reading, and are
“lies waiting to happen”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># loop from 1 to 10  -- this is &#39;obvious&#39; and unnecessary</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="mi">10</span>
    <span class="c1"># if i is less than 5, do something, otherwise do other thing</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="n">do_something</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">do_other_thing</span>
</pre></div>
</div>
<p>If we later change the threshold then we need to be careful to also update the
comment.
Otherwise the comment and the code no longer agree and it can be extremely
difficult, and often impossible, without more context to work out which is the
‘correct’ value.</p>
<p>Rather, it is better to include contextual comments, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="mi">10</span>
    <span class="c1"># when i is below 5, some physical property &lt;...&gt; is different and so we</span>
    <span class="c1"># need to solve the problem in a different way</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="n">do_something</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">do_other_thing</span>
</pre></div>
</div>
<p>Although this is a contrived example, it shows that now I understand <em>why</em> we
are switching between different functions. It is, of course, still possible that
the comment becomes out of sync with the code, however, because I know <em>why</em>
we are switching (thanks to the comment) I can more easily work out which value
is correct, and update the wrong value.</p>
<div class="admonition-best-practice admonition">
<p class="admonition-title">Best Practice</p>
<p>Use comments to explain <em>why</em> you are doing something or add
extra context. Only use comments to explain “what” the code is doing when it
isn’t obvious from the code itself.</p>
</div>
</section>
<section id="docstrings">
<h2>Docstrings<a class="headerlink" href="#docstrings" title="Permalink to this headline">#</a></h2>
<p>As well as comments at the line-level, it is incredibly helpful to have comments
at the function-level too.
These are often referred to as “Docstrings”.</p>
<p>A Docstring gives information about:</p>
<ul class="simple">
<li><p>what the function does</p></li>
<li><p>what inputs it expects, and in what format</p></li>
<li><p>what will be returned</p></li>
<li><p>An example of usage</p></li>
<li><p>Any other relevant information - extra reading, computational complexity,
related functions, etc</p></li>
</ul>
<p>There is no one particular format that works best for docstrings, and any format
which makes the above details clear is fine.
With that being said, it can be helpful to format such docstrings in a
particular way, to allow for automated documentation tools (e.g.
<a class="reference external" href="https://www.doxygen.nl/index.html">DoxyGen</a>
or
<a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>)
to parse them and automatically create pretty docs.</p>
<p>Sticking to such formats, particularly within a project, can make documentation
an easier task. A popular format in Python is the
<a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">Numpy</a>
format, which looks like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">quantity</span><span class="p">,</span> <span class="n">price</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; One line summary of function</span>

<span class="sd">    More verbose/extended description of function</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    quantity : int</span>
<span class="sd">        The first argument. Describe acceptable values and units.</span>
<span class="sd">        The quantity of units to process, must be integral and &gt;= 0.</span>
<span class="sd">    price : float</span>
<span class="sd">        The price per item in GBP</span>
<span class="sd">    </span>
<span class="sd">    Returns </span>
<span class="sd">    -------</span>
<span class="sd">    float</span>
<span class="sd">        The total cost to buy `quantity` items at `price` per item. </span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    Link to a document/paper that the function is based on</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; quant = 5</span>
<span class="sd">    &gt;&gt;&gt; price = 1.54</span>
<span class="sd">    &gt;&gt;&gt; my_function(quant, price)</span>
<span class="sd">    7.7</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>A more complete example can be found
<a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/example.html#example">here</a></p>
<p>The other benefit to using an existing format is that you can install plugins
to your editor to fill out the boilerplate for you. This makes the process of
documenting your code much, much, quicker.
See <a class="reference internal" href="IDEs-and-tools.html"><span class="doc std std-doc">IDEs and tools</span></a> for more.</p>
<p>Using Docstrings can also enable your editor to provide helpful tooltips while
coding.
Rather than having to search for the function and then spend some time
working out how to use it, you can have the editor prompt you as you type.</p>
<div class="admonition-best-practice admonition">
<p class="admonition-title">Best Practice</p>
<p>Write docstrings that explain what a function does and how
to use it. Configure your editor to automate parts of this process.</p>
</div>
</section>
<section id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">#</a></h2>
<p>As well as the main points of guidence above, there are a few other things that
can help make software development more straightforward</p>
<ul class="simple">
<li><p>Folder structure</p>
<ul>
<li><p>Organise your code into a <code class="docutils literal notranslate"><span class="pre">src</span></code> folder</p></li>
<li><p>Put reference/example data in <code class="docutils literal notranslate"><span class="pre">data</span></code> or <code class="docutils literal notranslate"><span class="pre">test_data</span></code></p></li>
<li><p>Have a folder <code class="docutils literal notranslate"><span class="pre">docs</span></code> for documentation such as user guides and tutorials</p></li>
<li><p>Put scripts that run simulations into <code class="docutils literal notranslate"><span class="pre">scripts</span></code></p></li>
<li><p>If you include other code in your project, consider an <code class="docutils literal notranslate"><span class="pre">include</span></code> folder</p></li>
<li><p>Add a README.md file at the top level that tells users how to install,
run, and get started with your code.</p></li>
</ul>
</li>
<li><p>Consistent coding style</p>
<ul>
<li><p>Style guides, like this document, help developers be consistent within a
project. By adopting a consistent style it becomes easier to read other
people’s code, as there is less to ‘work out’.</p></li>
<li><p>The particular style that you choose tends to matter less than having
all developers on a project adhering to the guidelines.</p></li>
</ul>
</li>
<li><p>Variable scope</p>
<ul>
<li><p>Reducing the scope of your variables can make it easier to read and debug
code. If I declare a variable, <code class="docutils literal notranslate"><span class="pre">my_var</span></code>, at the start of a script, and then
don’t use it until 10’s or 100’s of lines later, I may need to check all
these lines of code to make sure none have modified <code class="docutils literal notranslate"><span class="pre">my_var</span></code> when looking
for a bug. Conversely, if I declare the variable and then immediately use
it, then I don’t need to spend time checking the other code.</p></li>
</ul>
</li>
</ul>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">RSE Best Practices</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="single-responsibility.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Write small functions that do <em>one thing</em>, and do that <em>one thing</em> well</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Bristol Composites Institute Research Software Engineering Team<br/>
  
      &copy; Copyright University of Bristol 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>